"use strict";(self["webpackChunktest"]=self["webpackChunktest"]||[]).push([[808],{2778:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return CanvasVerifyCode}});var core_js_modules_es_error_cause_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1703),core_js_modules_es_error_cause_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_error_cause_js__WEBPACK_IMPORTED_MODULE_0__);class CanvasVerifyCode{constructor(t,e){this.events={},this.options={width:120,height:60,codeFont:"30px impact",codeType:"code",codeLength:6,strict:!0,calcRange:[10,20],calcSymbol:["+","-","*"],lineCount:5,...e};var i=document.createElement("canvas");t.appendChild(i),i.width=this.options.width,i.height=this.options.height,this.ctx=i.getContext("2d"),this.display(),i.addEventListener("click",(()=>{this.display()}),!1)}emit(t,...e){const i=this.events[t];if(i)for(let s of i)s.apply(this,e)}on(t,e){if("function"!==typeof e)throw new Error("Event handler should be a function");this.events[t]?this.events[t].push(e):this.events[t]=[e]}display(){this.ctx.clearRect(0,0,this.options.width,this.options.height),this.drawLine(),this.drawCode(),this.emit("onRefresh",this.verifyResult)}drawCode(){this.ctx.font=this.options.codeFont,this.ctx.textAlign="left",this.ctx.textBaseline="middle";let t=this.createCode();for(let e=0;e<this.options.codeLength;e++)this.ctx.save(),this.ctx.fillStyle=this.randomColor(),this.ctx.translate((e+.2)*this.options.width/this.options.codeLength,this.getRandom([.3*this.options.height,.7*this.options.height])),this.ctx.rotate(this.getRandom([-30,30])*Math.PI/180),this.ctx.fillText(t[e],0,0),this.ctx.restore()}drawLine(){for(var t=0;t<this.options.lineCount;t++){let t=[-this.options.width/2,1.5*this.options.width],e=[-this.options.height/2,1.5*this.options.height];this.ctx.lineWidth=this.getRandom([1,3]),this.ctx.strokeStyle=this.randomColor(),this.ctx.beginPath(),this.ctx.moveTo(this.getRandom(t),this.getRandom(e)),this.ctx.lineTo(this.getRandom(t),this.getRandom(e)),this.ctx.stroke()}}createCode(){if("code"===this.options.codeType){const t=this.getString({length:this.options.codeLength});return this.verifyResult=this.options.strict?t:t.toLocaleLowerCase(),t}const SUB=this.getRandom(this.options.calcRange),SUM=this.getArray(this.options.calcSymbol),MIN=this.getRandom(this.options.calcRange);return this.verifyResult=eval(SUB+SUM+MIN),SUB+("*"==SUM?"x":SUM)+MIN}getRandom([t=0,e=0]){return Math.floor(Math.random()*(e-t+1))+t}getString({length:t,str:e="abacdefghjklmnopqrstuvwxyzABCDEFGHJKLMNOPQRSTUVWXYZ0123456789",split:i=0,join:s="-"}){let o="";for(let r=0;r<t;r++)i>0&&0!==r&&r%i===0&&(o+=s),o+=e[this.getRandom([0,e.length-1])];return o}isArray(t){return Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),Array.isArray(t)}getArray(t){if(!this.isArray(t))throw new Error("argument must be an Array");return t[Math.floor(Math.random()*t.length)]}randomColor(){return`#${(Math.random()*16777215..toString(10)).toString(16).slice(-6)}`}}},2808:function(t,e,i){i.r(e),i.d(e,{default:function(){return u}});var s=i(3396),o=i(9242),r=i(7139);const n=t=>((0,s.dD)("data-v-710845d1"),t=t(),(0,s.Cn)(),t),h=n((()=>(0,s._)("span",{id:"verify"},null,-1)));function a(t,e,i,n,a,l){return(0,s.wg)(),(0,s.iD)(s.HY,null,[h,(0,s._)("p",null,[(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>a.value=t)},null,512),[[o.nr,a.value]])]),(0,s._)("p",null,"验证:"+(0,r.zw)(a.verifyResult==a.value),1),(0,s._)("button",{onClick:e[1]||(e[1]=(...t)=>l.display&&l.display(...t))},"更新")],64)}var l=i(2778),c={data(){return{verifyResult:"",value:"",verify:null}},mounted(){this.verify=new l.Z(document.getElementById("verify"),{width:120,height:50,codeLength:5}),console.log("this.verify.verifyResult",this.verify.verifyResult),this.verify.on("onRefresh",(t=>{console.log("verifyResult",t),this.verifyResult=this.verify.verifyResult}))},methods:{display(){this.verify.display()}}},d=i(89);const _=(0,d.Z)(c,[["render",a],["__scopeId","data-v-710845d1"]]);var u=_}}]);