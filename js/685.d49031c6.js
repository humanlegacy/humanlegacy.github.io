"use strict";(self["webpackChunktest"]=self["webpackChunktest"]||[]).push([[685],{3949:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var core_js_modules_es_error_cause_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1703),core_js_modules_es_error_cause_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_error_cause_js__WEBPACK_IMPORTED_MODULE_0__);__webpack_exports__["Z"]={props:{width:{type:Number,default:90},height:{type:Number,default:35},codeFont:{type:String,default:"22px arial"},codeType:{type:String,default:"code"},codeLength:{type:Number,default:5},strict:{type:Boolean,default:!0},calcRange:{type:Array,default:[10,20]},calcSymbol:{type:Array,default:["+","-","*"]},lineCount:{type:Number,default:5}},data(){return{canvas:null}},mounted(){const t=this.$refs.canvas;t.width=this.width,t.height=this.height,this.canvas=t.getContext("2d"),this.display()},methods:{display(){this.canvas.clearRect(0,0,this.width,this.height),this.createLine(),this.canvas.font=this.codeFont,this.canvas.textAlign="left",this.canvas.textBaseline="middle";let t=this.createCode();for(let e=0;e<this.codeLength;e++)this.canvas.save(),this.canvas.fillStyle=this.randomColor(),this.canvas.translate((e+.2)*this.width/this.codeLength,this.getRandom([.3*this.height,.7*this.height])),this.canvas.rotate(this.getRandom([-30,30])*Math.PI/180),this.canvas.fillText(t[e],0,0),this.canvas.restore()},createLine(){for(var t=0;t<this.lineCount;t++){let t=[-this.width/2,1.5*this.width],e=[-this.height/2,1.5*this.height];this.canvas.lineWidth=this.getRandom([1,3]),this.canvas.strokeStyle=this.randomColor(),this.canvas.beginPath(),this.canvas.moveTo(this.getRandom(t),this.getRandom(e)),this.canvas.lineTo(this.getRandom(t),this.getRandom(e)),this.canvas.stroke()}},createCode(){if("code"===this.codeType)return this.result=this.getString({length:this.codeLength}),this.$emit("getCode",this.strict?this.result:this.result.toLocaleLowerCase()),this.result;const SUB=this.getRandom(this.calcRange),SUM=this.getArray(this.calcSymbol),MIN=this.getRandom(this.calcRange);return this.result=eval(SUB+SUM+MIN),this.$emit("getCode",""+this.result),SUB+("*"==SUM?"x":SUM)+MIN},getRandom([t=0,e=0]){return Math.floor(Math.random()*(e-t+1))+t},getString({length:t,str:e="abacdefghjklmnopqrstuvwxyzABCDEFGHJKLMNOPQRSTUVWXYZ0123456789",split:s=0,join:a="-"}){let r="";for(let i=0;i<t;i++)s>0&&0!==i&&i%s===0&&(r+=a),r+=e[this.getRandom([0,e.length-1])];return r},isArray:function(t){return Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),Array.isArray(t)},getArray:function(t){if(!this.isArray(t))throw new Error("argument must be an Array");return t[Math.floor(Math.random()*t.length)]},randomColor(){return`#${(Math.random()*16777215..toString(10)).toString(16).slice(-6)}`}}}},685:function(t,e,s){s.r(e),s.d(e,{default:function(){return y}});var a=s(3396),r=s(9242),i=s(7139);function n(t,e,s,n,o,h){const l=(0,a.up)("vueVerifyCode",!0);return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(l,{onGetCode:h.getCode,ref:"verify",style:{border:"1px solid #aaa"}},null,8,["onGetCode"]),(0,a._)("p",null,[(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>o.value=t)},null,512),[[r.nr,o.value]])]),(0,a._)("p",null,"验证:"+(0,i.zw)(o.code==o.value),1),(0,a._)("button",{onClick:e[1]||(e[1]=e=>t.$refs.verify.display())},"更新")],64)}const o={ref:"canvas"};function h(t,e,s,r,i,n){return(0,a.wg)(),(0,a.iD)("canvas",o,null,512)}var l=s(3949),c=s(89);const d=(0,c.Z)(l.Z,[["render",h]]);var u=d,_=u,g={components:{vueVerifyCode:_},data(){return{code:"",value:""}},methods:{getCode(t){console.log("code",t),this.code=t}}};const f=(0,c.Z)(g,[["render",n]]);var y=f}}]);